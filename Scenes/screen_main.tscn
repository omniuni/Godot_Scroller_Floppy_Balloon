[gd_scene load_steps=13 format=4 uid="uid://ds0jps4mqwatn"]

[ext_resource type="PackedScene" uid="uid://bmt4wtrc1jkls" path="res://Scenes/ui_bar_top.tscn" id="1_56hru"]
[ext_resource type="Theme" uid="uid://da2ym3jqvm0nv" path="res://Themes/gflat.tres" id="1_al584"]
[ext_resource type="Script" uid="uid://dgeyldqo75nkn" path="res://Scripts/screen_main.gd" id="1_c6q44"]
[ext_resource type="PackedScene" uid="uid://cemvtl3so226j" path="res://Scenes/ui_pause.tscn" id="5_i8enm"]
[ext_resource type="PackedScene" uid="uid://cq1o5hcqif62l" path="res://Scenes/sub_game.tscn" id="6_rhby6"]
[ext_resource type="TileSet" uid="uid://d27pfgtp83uo" path="res://sub_game.tres" id="6_rnon7"]
[ext_resource type="PackedScene" uid="uid://du62dxybkt4vg" path="res://Scenes/ui_keycap.tscn" id="7_rnon7"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_yd3c8"]
size = Vector2(660, 60)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_tonuu"]
size = Vector2(100, 330)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_rnon7"]
bg_color = Color(0, 0, 0, 0.25490198)
border_width_top = 1
border_width_bottom = 1
border_color = Color(0.11, 0.11, 0.11, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_c2lgk"]
bg_color = Color(0.6, 0.573, 0.51000005, 0.49411765)
border_width_top = 1
border_width_bottom = 1
border_color = Color(0.8, 0.8, 0.8, 0)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_yd3c8"]
bg_color = Color(0, 0, 0, 0.784314)

[node name="ScreenMainControl" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme = ExtResource("1_al584")
script = ExtResource("1_c6q44")

[node name="RigidBodyCeiling" type="RigidBody2D" parent="."]
gravity_scale = 0.0
freeze = true
freeze_mode = 1
contact_monitor = true
max_contacts_reported = 3

[node name="CollisionShape2D" type="CollisionShape2D" parent="RigidBodyCeiling"]
position = Vector2(320, 20)
shape = SubResource("RectangleShape2D_yd3c8")

[node name="RigidBodyFloor" type="RigidBody2D" parent="."]
gravity_scale = 0.0
freeze = true
freeze_mode = 1
contact_monitor = true
max_contacts_reported = 3

[node name="CollisionShape2D" type="CollisionShape2D" parent="RigidBodyFloor"]
position = Vector2(320, 430)
shape = SubResource("RectangleShape2D_yd3c8")

[node name="BarTop" parent="." instance=ExtResource("1_56hru")]
layout_mode = 1
Title = "Floppy Balloon"
Action_Two = "  Start"

[node name="RigidBodyGoalLeft" type="RigidBody2D" parent="."]
freeze = true
freeze_mode = 1
contact_monitor = true
max_contacts_reported = 1

[node name="CollisionShape2D" type="CollisionShape2D" parent="RigidBodyGoalLeft"]
position = Vector2(-50, 225)
shape = SubResource("RectangleShape2D_tonuu")

[node name="RigidBodyGoalRight" type="RigidBody2D" parent="."]
freeze = true
freeze_mode = 1
contact_monitor = true
max_contacts_reported = 1

[node name="CollisionShape2D" type="CollisionShape2D" parent="RigidBodyGoalRight"]
position = Vector2(690, 225)
shape = SubResource("RectangleShape2D_tonuu")

[node name="Timer" type="Timer" parent="."]
autostart = true

[node name="SubGame" parent="." instance=ExtResource("6_rhby6")]
layout_mode = 0
offset_top = 50.0
offset_right = 640.0
offset_bottom = 400.0
platform_start = 8

[node name="ProgressBar" type="ProgressBar" parent="."]
layout_mode = 0
offset_left = 500.0
offset_top = 70.0
offset_right = 600.0
offset_bottom = 90.0

[node name="ProgressBarLevel" type="ProgressBar" parent="."]
layout_mode = 0
offset_top = 46.0
offset_right = 640.0
offset_bottom = 50.0
theme_override_styles/background = SubResource("StyleBoxFlat_rnon7")
theme_override_styles/fill = SubResource("StyleBoxFlat_c2lgk")
show_percentage = false

[node name="UiTouchControls" type="MarginContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
theme_override_constants/margin_right = 50
theme_override_constants/margin_bottom = 50

[node name="ButtonBump" type="Button" parent="UiTouchControls"]
modulate = Color(1, 1, 1, 0.39215687)
custom_minimum_size = Vector2(120, 90)
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 8
theme_override_colors/font_outline_color = Color(0, 0, 0, 0.7411765)
theme_override_constants/outline_size = 2
text = "Bump"

[node name="WinPanel" type="Panel" parent="."]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="CenterContainer" type="CenterContainer" parent="WinPanel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="PanelContainer" type="PanelContainer" parent="WinPanel/CenterContainer"]
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_yd3c8")

[node name="MarginContainer" type="MarginContainer" parent="WinPanel/CenterContainer/PanelContainer"]
layout_mode = 2
theme_override_constants/margin_left = 30
theme_override_constants/margin_top = 30
theme_override_constants/margin_right = 30
theme_override_constants/margin_bottom = 30

[node name="VBoxContainer" type="VBoxContainer" parent="WinPanel/CenterContainer/PanelContainer/MarginContainer"]
layout_mode = 2
theme_override_constants/separation = 20

[node name="Label" type="Label" parent="WinPanel/CenterContainer/PanelContainer/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Game Over"
horizontal_alignment = 1

[node name="LabelWinner" type="Label" parent="WinPanel/CenterContainer/PanelContainer/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 22
text = "LR Player Wins"
horizontal_alignment = 1

[node name="ButtonDone" type="Button" parent="WinPanel/CenterContainer/PanelContainer/MarginContainer/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
text = "Main Menu"

[node name="CountPanel" type="Panel" parent="."]
visible = false
custom_minimum_size = Vector2(120, 100)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -60.0
offset_top = -50.0
offset_right = 60.0
offset_bottom = 50.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_yd3c8")

[node name="Label" type="Label" parent="CountPanel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 56
text = "3"
horizontal_alignment = 1
vertical_alignment = 1

[node name="TimeLabel" type="Label" parent="."]
visible = false
layout_mode = 0
offset_left = 240.0
offset_top = 10.0
offset_right = 370.0
offset_bottom = 40.0
theme_override_font_sizes/font_size = 8
text = "00:00.00"
horizontal_alignment = 1
vertical_alignment = 1

[node name="UiPause" parent="." instance=ExtResource("5_i8enm")]
layout_mode = 1

[node name="Panel" type="Panel" parent="."]
layout_mode = 0
offset_left = 30.0
offset_top = 330.0
offset_right = 190.0
offset_bottom = 390.0

[node name="TileMapLayerLegend" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAACABIAAAAEAAAAAAADABIAAAAEAAAAAAAEABIAAAAEAAAAAAAGABIAAAAFAAAAAAAHABIAAAAFAAAAAAAIABIAAAAFAAAAAAA=")
tile_set = ExtResource("6_rnon7")

[node name="LabelSafe" type="Label" parent="."]
layout_mode = 0
offset_left = 40.0
offset_top = 360.0
offset_right = 100.0
offset_bottom = 380.0
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 2
theme_override_font_sizes/font_size = 8
text = "Safe"
horizontal_alignment = 1
vertical_alignment = 1

[node name="LabelHeal" type="Label" parent="."]
layout_mode = 0
offset_left = 120.0
offset_top = 360.0
offset_right = 180.0
offset_bottom = 380.0
theme_override_colors/font_outline_color = Color(0, 0, 0, 1)
theme_override_constants/outline_size = 2
theme_override_font_sizes/font_size = 8
text = "Heal"
horizontal_alignment = 1
vertical_alignment = 1

[node name="UiUpdateTimer" type="Timer" parent="."]
wait_time = 0.1
autostart = true

[node name="UiKeycap" parent="." instance=ExtResource("7_rnon7")]
position = Vector2(365, 25)
action_name = "Start"

[node name="Label" type="Label" parent="."]
layout_mode = 0
offset_left = 57.0
offset_top = 342.0
offset_right = 187.0
offset_bottom = 352.0
theme_override_font_sizes/font_size = 8
text = "Bump The Balloon"
vertical_alignment = 1

[node name="UiKeycap2" parent="." instance=ExtResource("7_rnon7")]
position = Vector2(43, 346)
action_name = "Bump"

[connection signal="body_entered" from="RigidBodyCeiling" to="." method="_on_rigid_body_ceiling_body_entered"]
[connection signal="body_entered" from="RigidBodyFloor" to="." method="_on_rigid_body_floor_body_entered"]
[connection signal="On_Secondary_Action" from="BarTop" to="." method="_on_bar_top_on_secondary_action"]
[connection signal="body_entered" from="RigidBodyGoalLeft" to="." method="_on_rigid_body_goal_left_body_entered"]
[connection signal="body_entered" from="RigidBodyGoalRight" to="." method="_on_rigid_body_goal_right_body_entered"]
[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="on_column_rendered" from="SubGame" to="." method="_on_sub_game_on_column_rendered"]
[connection signal="balloon_life" from="SubGame/SubViewport/ItemBalloon" to="." method="_on_item_balloon_balloon_life"]
[connection signal="pressed" from="UiTouchControls/ButtonBump" to="." method="_on_button_bump_pressed"]
[connection signal="pressed" from="WinPanel/CenterContainer/PanelContainer/MarginContainer/VBoxContainer/ButtonDone" to="." method="_on_button_done_pressed"]
[connection signal="timeout" from="UiUpdateTimer" to="." method="_on_ui_update_timer_timeout"]

[editable path="SubGame"]
